#include<bits/stdc++.h>
using namespace std;

#define ll long long int
int dp[100007];

bool compare(char a,char b)
{
    if((a=='{'&&b=='}')||(a=='['&&b==']')||(a=='('&&b==')')||(a=='<'&&b=='>'))
        return true;
    return false;
}

int main()
{
//    freopen("f.txt","r",stdin);
//    freopen("g.txt","w",stdout);
    int t,pos,val,n;
    cin>>t;
    string s;
    for(int cas=1; cas<=t; cas++)
    {
        cin>>s;
        stack<int>stk;
        n=s.size();
        for(int i=0;i<n;i++)
        {
            dp[i]=0;
            if(s[i]=='('||s[i]=='<'||s[i]=='['||s[i]=='{')
            {
                stk.push(i);
            }
            else
            {
                //cout<<i<<" "<<s[i]<<" "<<stk.size()<<endl;
                if(!stk.empty()&&compare(s[stk.top()],s[i]))
                {
                    dp[stk.top()]=i-stk.top()+1;
                    stk.pop();
                }
                else
                {
                    while(!stk.empty())
                        stk.pop();
                }
            }
        }
        for(int i=n-1;i>=0;i--)
            dp[i]=dp[i]+dp[i+dp[i]];
        cout<<"Case "<<cas<<":"<<endl;
        for(int i=0;i<n;i++)
            cout<<dp[i]<<endl;
    }
    return 0;
}


/*


4
100000 1 1 4
10 5 2 100000
100000 12 3 11
100000 100000 100000 100000


*/
